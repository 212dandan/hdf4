HDF version 4.2.5-post0 currently under development
===================================================

INTRODUCTION

This document describes the differences between HDF 4.2.5 and HDF 4.2.5-post*.
It is written for people who are familiar with previous releases of HDF 
and wish to migrate to HDF 4.2.5-post*.

The HDF 4.2.5 documentation can be found on the The HDF Group's FTP server:

    ftp://ftp.hdfgroup.org/HDF/Documentation/

First-time HDF users are encouraged to read the HDF FAQ, which can be
reached from the HDF product home page:
  
    http://hdfgroup.org/products/hdf4/

If you have any questions or comments, please see the HDF Support page:

    http://hdfgroup.org/services/support.html

CONTENTS

- New features and changes
  -- Source distribution
  -- Configuration
  -- Library
  -- Utilities
- Support for new platforms and compilers
- Bugs fixed since HDF4.2.5
  -- Utilities
  -- Library
  -- Configuration
- Documentation
- Platforms tested
- Known problems


New features and changes
========================
   Source distribution
   ===================
   - [None.  PPM - YYYY/MM/DD]

   Configuration
   ============= 
   - Specified explicit version of the netCDF API (v 2.3.2) used by HDF in
     configure help and in configuration SUMMARY.

   Library
   ========= 
   - The function Vnattrs only processes attributes created by Vsetattr.  It is
     not aware of attributes created by the pre-Vsetattr methods.  The following
     functions are added to work around the limitation of Vnattrs:
     + Vnattrs2 gives number of new- and old-style attributes
     + Vattrinfo2 gives information about an old or new style attribute
-> talk to Elena about the 2 customized arguments for hmap
     + Vgetattr2 reads values of an old or new style attribute
     BMR - 2011/06/09

   - The following functions were specifically added to support the HDF4 Mapping
     project:
     + VSgetdatainfo gives offsets/lengths of a vdata's data
     + ANgetdatainfo gives offset/length of an annotation's data
     + SDgetdatainfo gives offsets/lengths of a data set's data
     + GRgetdatainfo gives offsets/lengths of a raster image's data
     + VSgetattdatainfo gives offset/length of vdata attribute's data
     + VGgetattdatainfo gives offset/length of vgroup attribute's data
     + GRgetattdatainfo gives offset/length of raster image attribute's data
     + SDgetattdatainfo gives offset/length of data set attribute's data
     + SDgetoldattdatainfo gives offset/length of a pre-defined attribute in
       old format
     + SDgetanndatainfo gives offset/lenth of an annotation belonging to an SDS
     + Vgetvgroups gives a list of user-created vgroups
     + VSgetvdatas gives a list of user-created vdatas
     + VSofclass gives a list of vdatas of a specific class
     + Hgetntinfo gives some information about a number type
     + GR2bmapped indicates whether a raster image should be mapped
     BMR - 2011/06/09

   - Two functions are added to provide information of an external file:
     VSgetexternalfile for a vdata and SDgetexternalfile for a data set.


   Test
   ====
   - [None]

   Utilities
   ========= 
   - [None]

Support for new platforms and compilers
=======================================
   - [None]

Bugs fixed since HDF4.2.5
=========================
   Utilities
   ========= 
   - The problem where hdiff displays zeroes for Vdata values that are non-zero
     had been fixed.  BMR - 2011/06/09
   - hdp had been fixed for the problems of
     + dumpvd printing Name/Class incorrectly
     + dumprig giving wrong info about RIS24 and palettes
     + dumpvg missing some items in the Graphical representation
     BMR - 2011/06/09


   Library
   ========= 
   - The JPEG test failure due to the different versions of the JPEG library
     had been fixed.  HDF4 is expected to build and pass regression tests for
     any version of the JPEG library available on the user's systems. 


   Configuration
   =============
   - [None]


Documentation
==============
The updated HDF Reference Manual is now available in HTML format.

Platforms tested
================

HDF 4.2.5-post* has been tested in the following platforms:

   FreeBSD 6.3-STABLE i386       gcc 3.4.6 [FreeBSD] 20060305
   (duty)                        f77 (gcc) 3.4.6
                                 gcc (GCC) 4.4.4 20100126 (prerelease)
                                 GNU Fortran (GCC) 4.4.4 20100126
                                 (prerelease) 

   FreeBSD 6.3-STABLE amd64      gcc 3.4.6 [FreeBSD] 20060305
   (liberty)                     f77 (gcc) 3.4.6
                                 gcc (GCC) 4.4.4 20100126 (prerelease)
                                 GNU Fortran (GCC) 4.4.4 20100126
                                 (prerelease)


   Linux jam 2.6.18-164.el5 #1   gcc (GCC) 4.1.2 20080704 (Red Hat 4.1.2-46)
      SMP i686 i386              G95 (GCC 4.0.3 (g95 0.92!) Jun 24 2009)
   (jam)                         g77 (GCC) 3.4.6 20060404
                                 pgcc and pgf90 8.0-5 32-bit target 
                                 on x86 Linux -tp penryn
                                 Intel(R) C Compiler, Version 11.0
                                 Intel(R) Fortran Compiler, Version 11.0


   Linux 2.6.18-164.11.1.el5 #1  gcc (GCC) 4.1.2 20080704 (Red Hat 4.1.2-46)
      SMP x86_64 GNU/Linux       G95 (GCC 4.0.3 (g95 0.92!) Jun 24 2009)
   (amani)                       icc (ICC) 11.1 20090827
                                 ifort (IFORT) 11.1 20090827
                                 pgcc and pgf90 9.0-4 64-bit target 
                                 on x86-64 Linux -tp k8-64e
                                 GNU Fortran (GCC) 4.1.2 20080704 
                                 (Red Hat 4.1.2-46)

   SunOS 5.10 32- and 64-bit     Sun C 5.9 SunOS_sparc Patch 124867-12 
   (linew)                       Sun Fortran 95 8.3 SunOS_sparc 
                                 Patch 127000-12 

   Linux 2.6.16.54-0.2.5 #1      Intel(R) C Compiler Version 10.1.017
      Altix SMP ia64             Intel(R) Fortran Itanium(R) Version 10.1.017
   (cobalt)                      SGI MPI 1.16

   Xeon Linux 2.6.18-92.1.10.el5_lustre.1.6.6smp-perfctr
      #2 SMP x86_64              Intel(R) C Compiler Version 10.0.026
   (abe)                         Intel(R) Fortran Compiler Version 10.0.026

   IA-64 Linux 2.4.21.SuSE_292.til1
      ia64
   (NCSA tg-login)               Intel(R) C Compiler Version 8.1.037
                                 Intel(R) Fortran Compiler Version 8.1.033

   AIX 5.3 (32/64 bit)           IBM XL C/C++ for AIX, V9.0
   (LLNL Up)                     IBM XL Fortran for AIX, V11.1

   AIX 6.1 (32/64 bit)           IBM XL C/C++ for AIX, V10.1
   (NCSA bp-login)               IBM XL Fortran for AIX, V12.1

   Windows XP                    Visual Studio 2005 (w/ Intel Fortran 9.1/10.1)
                                 Visual Studio 2008 (w/ Intel Fortran 10.1)
                                 cygwin (gcc 4.3.4)

   Windows XP(64 bit)            Visual Studio 2005 (w/ Intel Fortran 9.1/10.1)
                                 Visual Studio 2008 (w/ Intel Fortran 10.1)
                                 
   Windows Vista                 Visual Studio 2008 (w/ Intel Fortran 10.1)
                                 
   Windows Vista(64 bit)         Visual Studio 2008 (w/ Intel Fortran 10.1)
                                 
   MAC OS X Intel 10.6.2         Darwin 10.2.0
                                 Intel C icc (ICC) 11.1 20091130
                                 Intel Fortran ifort (IFORT) 11.1 20091130 
                                 i686-apple-darwin10-gcc-4.2.1 (GCC) 4.2.1
                                 GNU Fortran (GCC) 4.5.0 20090910
                             

   Linux 2.6.31.12-174.2.3.fc12.x86_64 #1 SMP 
      x86_64 GNU/Linux           gcc (GCC) 4.4.2
   (Fedora 12)                   gfortran GNU Fortran (GCC) 4.4.2 20091222 
                                                      (Red Hat 4.4.2-20)
   Linux 2.6.31-17-generic #54-Ubuntu SMP 
      x86_64 GNU/Linux           gcc (GCC) 4.4.1
   (Ubuntu 9.10)                 gfortran GNU Fortran (GCC) 4.4.1 
                                                      
   Linux 2.6.31.8-0.1-desktop #1 SMP 
      x86_64 GNU/Linux           gcc (GCC) 4.4.1
   (OpenSuse 11.2)               gfortran GNU Fortran (GCC) 4.4.1 


Known problems
==============

o  Wnen buidling in AIX systems, if CC is xlc with -qlanglvl=ansi, configure
   fails when checking for the jpeglib.h header due to the duplicated
   macro definition of HAVE_STDLIB_H.  This is because some newer builds
   of jpeg library has HAVE_STDLIB_H defined in its jconfig.h header file.
   Without the -qlanglvl=ansi, some older xlc (e.g., V7.0) still fails but
   newer xlc (e.g., V9.0) passes.  AKC - 2010/02/17

o  When building on Linux/UNIX platforms, the szip shared library files must
   be in the system library path. This can be done by adding a link to
   the libsz.* files into the /usr/lib folder or by adding the library
   location to the LD_LIBRARY_PATH environment variable.
      Ex. export LD_LIBRARY_PATH=path_to_szip_lib:$LD_LIBRARY_PATH
   Optionally, one can use the static szip library files by adding '-static'
   to the CFLAGS environment variable.
   
o  Existing data written by an HDF4 Library prior to HDF 4.2r2:
   When a one-dimensional SDS and a dimension scale were created with
   the same name, subsequent accesses to the dimension scale or to the
   SDS might corrupt the data.

   HDF4 Library Releases 4.2r2 and later do not allow this conflict to
   occur.  On the other hand, recent libraries are also unable to detect
   such conflicts that already exist in a file.  It is therefore STRONGLY
   recommended to check for such name duplication before working with data 
   created with a pre-4.2r2 library. 

   The functions SDgetnumvars_byname and SDnametoindices are provided
   to help detect such name conflicts and select the correct object to
   access, respectively; see the HDF Reference Manual entries for 
   further details.

o  This release does not support VMS systems.

o  N-Bit compression is not supported with Fortran APIs.

o  Using both fill-value and compression on SD datasets does not work.

o  When using PGI compilers, make sure that the JPEG library is also compiled 
   with a PGI C compiler; linking with a JPEG library built with gcc causes 
   JPEG library tests to fail.  To bypass the problem:

       x Set LIBS flag to $PGI_JPEG_INSTALL_DIR/lib/libjpeg.a
         where $PGI_JPEG_INSTALL_DIR points to the installation directory
         for the PGI-compiled JPEG library:

         setenv LIBS $PGI_JPEG_INSTALL_DIR/lib/libjpeg.a

       x Use the --with-jpeg=$PGI_JPEG_INSTALL_DIR configure flag to 
         configure with the PGI-compiled JPEG library:

         ./configure --with-jpeg=$PGI_JPEG_INSTALL_DIR --with-zlib....

o  In order for the API SDgetdatasize to get the correct compressed size
   of the data, the dataset needs to be closed (SDendaccess) or read
   (SDreaddata), after being written and before SDgetdatasize is called.
