##############################################################################
## This file was taken from the Cygnus Toolkit distribution and used as
## as a template.

## This file is a shell script fragment that supplies the information
## necessary to tailor a template configure script into the configure
## script appropriate for this directory.  For more information, check
## any existing configure script.  

## Be warned, there are two types of configure.in files.  There are those
## used by Autoconf, which are macros which are expanded into a configure
## script by autoconf.  The other sort, of which this is one, is executed
## by Cygnus configure.  

## For more information on these two systems, check out the documentation
## for 'Autoconf' (autoconf.texi) and 'Configure' (configure.texi).  

##############################################################################

# Right now the JPEG library an netCDF come with their own configure
# generated from autoconf
host_libs="hdf/jpeg mfhdf"

## We assign ${configdirs} this way to remove all embedded newlines.  This
## is important because configure will choke if they ever get through.
#
configdirs=`echo ${host_libs}`

#Directories we want configure to generate Makefiles from Makefile.in
subdirs="hdf man hdf/src hdf/test hdf/util"

################################################################################

srctrigger=move-if-change
srcname="HDF/netCDF library"

# This gets set non-empty for some net releases of packages.
appdirs=""

# per-host:

# Work in distributions for each host
host_makefile_frag=""
if [ -d ${srcdir}/config ]; then
case "${host}" in
  alpha-dec-osf*)         host_makefile_frag=config/mh-alpha ;;
  mips*-dec-ultrix*)      host_makefile_frag=config/mh-decstation ;;
  mips*-sgi-irix6.*)      host_makefile_frag=config/mh-irix6 ;;
  mips*-sgi-irix6_32*)    host_makefile_frag=config/mh-irix32 ;;
  mips*-sgi-irix5*)       host_makefile_frag=config/mh-irix5 ;;
  mips*-sgi-irix4*)       host_makefile_frag=config/mh-irix4 ;;
  i[345]86-*-linux*)      host_makefile_frag=config/mh-linux ;;
  i[345]86-*-freebsd*)    host_makefile_frag=config/mh-fbsd ;;
  *-ibm-aix*)             host_makefile_frag=config/mh-aix ;;
  i386-*-solaris2*)       host_makefile_frag=config/mh-solarisx86 ;;
  *-*-solaris2*)          host_makefile_frag=config/mh-solaris ;;
  *-sun-*)		  host_makefile_frag=config/mh-sun ;;
  *-hp-hpux*)             host_makefile_frag=config/mh-hpux ;;
  *-convex-bsd*)          host_makefile_frag=config/mh-convex ;;
  *-cray-unicos*)         host_makefile_frag=config/mh-unicos ;;
  *-cm5-*)		  host_makefile_frag=config/mh-cm5 ;;
esac
fi

# Check for valid platfroms before we continue
if [ "${host_makefile_frag}" = "" ] ; then
    echo '***' "The HDF/netCDF library is not supported on host ${host}" 1>&2
    exit 1
fi

# make sure makefile fragment is there
if [ ! -f ${srcdir}/${host_makefile_frag} ]; then
    echo '***' "We are missing makefile fragment ${host_makefile_frag}" 1>&2
    echo '***' "Please read the installation docs" 1>&2
    exit 1
fi


# The Solaris /usr/ucb/cc compiler does not appear to work.
case "${host}" in
  sparc-sun-solaris2*)
      if [ "`/usr/bin/which ${CC-cc}`" = "/usr/ucb/cc" ] ; then
          could_use=
          [ -d /opt/SUNWspro/bin ] && could_use="/opt/SUNWspro/bin"
          if [ -d /opt/cygnus/bin ] ; then
              if [ "$could_use" == "" ] ; then
                  could_use="/opt/cygnus/bin"
              else
                  could_use="$could_use or /opt/cygnus/bin"
              fi
          fi
        if [ "$could_use" = "" ] ; then
            echo "Warning: compilation may fail because you're using"
            echo "/usr/ucb/cc.  You should change your PATH or CC "
            echo "variable and rerun configure."
        else
            echo "Warning: compilation may fail because you're using"
            echo "/usr/ucb/cc, when you should use the C compiler from"
            echo "$could_use.  You should change your"
            echo "PATH or CC variable and rerun configure."
        fi
      fi
  ;;
esac

# per-target:

# get proper CUSTOMIZE file for 'mfhdf' side
files=
links=mfhdf/CUSTOMIZE
if [ -d ${srcdir}/config ]; then
case "${host}" in
  alpha-dec-osf*)         files=config/custom_alpha ;;
  mips*-dec-ultrix*)      files=config/custom_dec ;;
  mips*-sgi-irix6.*)      files=config/custom_irix6 ;;
  mips*-sgi-irix6_32*)    files=config/custom_irix32 ;;
  mips*-sgi-irix5*)       files=config/custom_irix5 ;;
  mips*-sgi-irix4*)       files=config/custom_irix4 ;;
  i[345]86-*-linux*)      files=config/custom_linux ;;
  i[345]86-*-freebsd*)    files=config/custom_fbsd ;;
  *-ibm-aix*)             files=config/custom_aix ;;
  i386-*-solaris2*)       files=config/custom_solarisx86 ;;
  *-*-solaris2*)          files=config/custom_solaris ;;
  *-sun-*)		  files=config/custom_sun ;;
  *-hp-hpux*)             files=config/custom_hpux ;;
  *-convex-bsd*)          files=config/custom_convex ;;
  *-cray-unicos*)         files=config/custom_unicos ;;
  *-cm5-*)		  files=config/custom_cm5 ;;
esac
fi

# make sure host specific custom_xxx is there
if [ ! -f ${srcdir}/${files} ]; then
    echo '***' "We are missing host specific customize file ${files}" 1>&2
    echo '***' "Please read the installation docs" 1>&2
    exit 1
fi


# post-target:

#
# Local Variables:
# fill-column: 131
# End:
#
